<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Products - rebru</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body class="product-page">
    <header>
      <div class="brand">
        <img src="Glogo.png" alt="logo Rebru.id" class="logo" />
      </div>

      <button class="menu-toggle" aria-label="Toggle Menu">
        <i class="fas fa-bars"></i>
      </button>

      <nav>
        <a href="index.html">Home</a>
        <a href="blog.html">Blog</a>
        <a href="products.html" class="active">Product</a>
        <a href="about.html">About</a>
        <a href="contact.html" class="cta-button">Get in Touch</a>
      </nav>
    </header>

    <main class="Products">
      <section id="products-container">
        <h1 class="page-title">
          <i><strong>Our Products</strong></i>
        </h1>

        <article class="product-card">
          <div class="product-frame-wrapper">
            <div class="slider-track">
              <div
                class="slide-item"
                data-type="3d"
                data-src="./models/soap.glb"
              ></div>
            </div>
            <div class="slider-indicators"><span class="dot"></span></div>
          </div>

          <div class="info">
            <h2>1. Rebru Soap</h2>
            <p>
              Setiap batang sabun Rebru lahir dari ampas kopi yang sudah selesai
              menyeduh cerita di cangkirmu. Dengan sentuhan alami, sabun ini
              tidak hanya membersihkan kulit, tetapi juga menghadirkan
              pengalaman yang ramah lingkungan. Teksturnya lembut, aromanya
              menenangkan, dan kandungan kopi di dalamnya membantu eksfoliasi
              secara alami.
            </p>
          </div>
        </article>

        <article class="product-card">
          <div class="product-frame-wrapper">
            <div class="slider-track">
              <div
                class="slide-item"
                data-type="3d"
                data-src="./models/candle.glb"
              ></div>
            </div>
            <div class="slider-indicators"><span class="dot"></span></div>
          </div>
          <div class="info">
            <h2>2. Scented Candle</h2>
            <p>
              Dari ampas kopi yang tersisa, kami menciptakan lilin dengan
              karakter unik: aroma hangat kopi yang berpadu dengan desain
              estetik. Lilin Rebru bukan sekadar penerang ruangan, tetapi juga
              simbol keberlanjutan—bahwa limbah bisa memiliki kehidupan kedua
              yang bernilai.
            </p>
          </div>
        </article>

        <article class="product-card">
          <div class="product-frame-wrapper">
            <div class="slider-track">
              <div
                class="slide-item"
                data-type="3d"
                data-src="./models/car_fragrance.glb"
              ></div>
            </div>
            <div class="slider-indicators"><span class="dot"></span></div>
          </div>
          <div class="info">
            <h2>3. Car Fragrance</h2>
            <p>
              Setiap perjalanan bisa menjadi lebih segar dan bermakna bersama
              Rebru Car Fragrance. Terbuat dari limbah kopi yang diolah kembali,
              pengharum mobil ini menghadirkan aroma khas kopi yang natural
              tanpa bahan kimia berlebihan.
            </p>
          </div>
        </article>

        <article class="product-card">
          <div class="product-frame-wrapper">
            <div class="slider-track">
              <div
                class="slide-item"
                data-type="3d"
                data-src="./models/biochar.glb"
              ></div>
            </div>
            <div class="slider-indicators"><span class="dot"></span></div>
          </div>
          <div class="info">
            <h2>4. Biochar</h2>
            <p>
              Biochar adalah bukti nyata bahwa ampas kopi dapat memberi manfaat
              jauh melampaui meja café. Dengan teknologi sederhana namun
              berdampak besar, Rebru mengolah sisa kopi menjadi biochar—arang
              aktif yang dapat menyuburkan tanah sekaligus menyerap karbon.
            </p>
          </div>
        </article>

        <article class="product-card">
          <div class="product-frame-wrapper">
            <div class="slider-track">
              <div
                class="slide-item"
                data-type="3d"
                data-src="./models/compost.glb"
              ></div>
            </div>
            <div class="slider-indicators"><span class="dot"></span></div>
          </div>
          <div class="info">
            <h2>5. Compost</h2>
            <p>
              Ampas kopi yang biasanya terbuang bisa menjadi sumber nutrisi
              berharga bagi tanah. Melalui proses pengolahan alami, Rebru
              mengubah limbah kopi menjadi kompos organik yang kaya unsur hara.
              Kompos ini membantu memperbaiki struktur tanah dan meningkatkan
              kesuburan.
            </p>
          </div>
        </article>

        <article class="product-card">
          <div class="product-frame-wrapper">
            <div class="slider-track">
              <div
                class="slide-item"
                data-type="3d"
                data-src="./models/briquette.glb"
              ></div>
            </div>
            <div class="slider-indicators"><span class="dot"></span></div>
          </div>
          <div class="info">
            <h2>6. Briquette</h2>
            <p>
              Rebru menghadirkan briket ramah lingkungan sebagai alternatif
              energi terbarukan. Briket ini memiliki daya bakar tinggi, minim
              asap, dan lebih bersih dibandingkan bahan bakar konvensional.
              Cocok digunakan untuk kebutuhan rumah tangga maupun industri
              kecil.
            </p>
          </div>
        </article>

        <article class="product-card">
          <div class="product-frame-wrapper">
            <div class="slider-track">
              <div
                class="slide-item"
                data-type="3d"
                data-src="./models/merch.glb"
              ></div>
            </div>
            <div class="slider-indicators"><span class="dot"></span></div>
          </div>
          <div class="info">
            <h2>7. Eco-Goods</h2>
            <p>
              Lebih dari sekadar produk, Rebru juga menghadirkan berbagai
              eco-goods hasil upcycle dari limbah kopi. Dari aksesori hingga
              barang fungsional sehari-hari, semua dirancang dengan filosofi
              Useful, Durable, Beautiful.
            </p>
          </div>
        </article>
      </section>
    </main>

    <footer>
      <p>&copy;2025 rebru. All Rights Reserved.</p>
      Follow us on |
      <a
        href="https://www.instagram.com/rebru.id"
        class="social-icon"
        target="_blank"
      >
        <i class="fab fa-instagram"></i>
        <span><strong>Instagram</strong></span>
      </a>
    </footer>

    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
      }
    </script>

    <script type="module">
      import * as THREE from "three";
      import { GLTFLoader } from "three/addons/loaders/GLTFLoader.js";

      // --- 1. INISIALISASI SLIDE ---
      function initSlide(container) {
        const type = container.getAttribute("data-type");
        const src = container.getAttribute("data-src");

        if (!src) return; // Skip jika kosong

        if (type === "3d") {
          init3D(container, src);
        } else if (type === "2d") {
          init2D(container, src);
        }
      }

      // --- 2. LOGIC GAMBAR 2D ---
      function init2D(container, imgSrc) {
        const img = document.createElement("img");
        img.src = imgSrc;
        img.className = "img-2d";
        img.alt = "Product Image";
        // Error handling visual
        img.onerror = () => {
          container.style.background = "#eee";
        };
        container.appendChild(img);
      }

      // --- 3. LOGIC MODEL 3D ---
      function init3D(container, modelPath) {
        // Fallback size
        const width = container.clientWidth || 350;
        const height = container.clientHeight || 350;

        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0xf4f4f4); // Warna abu-abu muda frame

        const camera = new THREE.PerspectiveCamera(
          45,
          width / height,
          0.1,
          100
        );
        camera.position.z = 4;

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(width, height);
        renderer.setPixelRatio(window.devicePixelRatio);
        container.appendChild(renderer.domElement);

        // Lighting
        const ambientLight = new THREE.AmbientLight(0xffffff, 1.2);
        scene.add(ambientLight);
        const dirLight = new THREE.DirectionalLight(0xffffff, 2.5);
        dirLight.position.set(2, 2, 5);
        scene.add(dirLight);

        // Load GLB
        const loader = new GLTFLoader();
        let productMesh;

        loader.load(
          modelPath,
          (gltf) => {
            productMesh = gltf.scene;

            // Auto-Scale Logic
            const box = new THREE.Box3().setFromObject(productMesh);
            const size = new THREE.Vector3();
            box.getSize(size);
            const maxDim = Math.max(size.x, size.y, size.z);
            const scale = 2.5 / maxDim; // Skala target agar pas di frame
            productMesh.scale.set(scale, scale, scale);

            // Center Position
            const newBox = new THREE.Box3().setFromObject(productMesh);
            const center = new THREE.Vector3();
            newBox.getCenter(center);
            productMesh.position.sub(center);

            scene.add(productMesh);
          },
          undefined,
          (err) => {
            console.warn("Error loading GLB:", modelPath);
          }
        );

        // Mouse Interaction
        let targetRotationX = 0;
        let targetRotationY = 0;

        container.addEventListener("mousemove", (e) => {
          // Jika sedang klik kiri (drag slider), jangan putar 3D
          if (e.buttons === 1) return;

          const rect = container.getBoundingClientRect();
          const x = ((e.clientX - rect.left) / width) * 2 - 1;
          const y = -((e.clientY - rect.top) / height) * 2 + 1;
          targetRotationY = x * 1.5;
          targetRotationX = y * 0.5;
        });

        // Reset rotasi saat mouse keluar
        container.addEventListener("mouseleave", () => {
          targetRotationX = 0;
          targetRotationY = 0;
        });

        function animate() {
          requestAnimationFrame(animate);
          if (productMesh) {
            // Gerakan halus (Lerp)
            productMesh.rotation.y +=
              (targetRotationY - productMesh.rotation.y) * 0.05;
            productMesh.rotation.x +=
              (targetRotationX - productMesh.rotation.x) * 0.05;
          }
          renderer.render(scene, camera);
        }
        animate();
      }

      // --- 4. EKSEKUSI SEMUA SLIDE ---
      const slides = document.querySelectorAll(".slide-item");
      slides.forEach((slide) => initSlide(slide));

      // Script Hamburger Menu
      const menuToggle = document.querySelector(".menu-toggle");
      const nav = document.querySelector("nav");
      if (menuToggle && nav) {
        menuToggle.addEventListener("click", () => {
          nav.classList.toggle("active");
        });
      }
    </script>
  </body>
</html>
