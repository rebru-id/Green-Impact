<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Products - Rebru</title>

    <!-- Import Favorite Icon -->
    <link rel="icon" 
      type="image/png" href="assets/img/favicon.png"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>

  <body class="product-page">
    <header>
      <div class="brand">
        <img src="assets/img/Glogo.png" alt="logo Rebru.id" class="logo" />
      </div>

      <button class="menu-toggle" aria-label="Toggle Menu">
        <i class="fas fa-bars"></i>
      </button>

      <nav>
        <a href="index.html">Home</a>
        <a href="blog.html">Blog</a>
        <a href="products.html" class="active">Product</a>
        <a href="about.html">About</a>
        <a href="contact.html" class="cta-button">Get in Touch</a>
      </nav>
    </header>

    <main class="Products">
      <section id="products-container">
        <h1 class="page-title">
          <i><strong>Our Products</strong></i>
        </h1>

        <!-- BIOCHAR -->
        <article class="product-card">
          <div class="product-frame-wrapper">
            <div class="slider-track">
              <div
                class="slide-item"
                data-type="2d"
                data-src="assets/img/biochar.png"
              ></div>
            </div>
            <div class="slider-indicators"><span class="dot"></span></div>
          </div>

          <div class="info">
            <h2>Biochar</h2>
            <p>
              Biochar adalah bukti nyata bahwa ampas kopi dapat memberi manfaat
              jauh melampaui meja caf√©.
            </p>

            <div class="product-action" data-price="35000">
              <div class="price-tag">Rp 35.000</div>
              <div class="action-controls">
                <div class="qty-selector">
                  <button class="qty-btn minus">
                    <i class="fas fa-minus"></i>
                  </button>
                  <input
                    type="number"
                    class="qty-input"
                    value="1"
                    min="1"
                    readonly
                  />
                  <button class="qty-btn plus">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <button class="btn-buy">
                  <i class="fas fa-shopping-cart"></i>
                  <span class="total-display">Rp 35.000</span>
                </button>
              </div>
            </div>

            <div class="product-details">
              <div class="accordion-item">
                <button class="accordion-header">
                  Berat Bersih <i class="fas fa-chevron-down"></i>
                </button>
                <div class="accordion-content"><p>1000 gram (1Kg)</p></div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header">
                  Spesifikasi & Bahan <i class="fas fa-chevron-down"></i>
                </button>
                <div class="accordion-content">
                  <ul>
                    <li>
                      <strong>Bahan Utama:</strong> Ampas Kopi (Upcycled, 80%),
                      Biomassa Pilihan Lain (20%), Diproses melalui Pirolisis.
                    </li>
                    <li>
                      <strong>Opsi Varian:</strong> 1Kg, 5Kg, 10Kg, dan 25Kg
                    </li>
                    <li>
                      <strong>Fitur:</strong> Kapasitas Tukar Kation (KTK)
                      Tinggi, Peningkatan Retensi Air, Menyimpan Karbon Jangka
                      Panjang, pH Netral.
                    </li>
                  </ul>
                </div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header">
                  Dampak Lingkungan <i class="fas fa-chevron-down"></i>
                </button>
                <div class="accordion-content">
                  <p>
                    Biochar memiliki dampak mitigasi iklim terkuat karena secara
                    aktif menyimpan karbon dalam bentuk stabil di dalam tanah.
                  </p>
                  <div class="impact-highlight">
                    <strong
                      ><i class="fas fa-leaf"></i> 800g Ampas Kopi
                      Diselamatkan</strong
                    >
                    Setara dengan mengunci <strong>1.03 Kg CO2e</strong> dari
                    atmosfer.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </article>

        <!-- COMPOST -->
        <article class="product-card">
          <div class="product-frame-wrapper">
            <div class="slider-track">
              <div
                class="slide-item"
                data-type="2d"
                data-src="assets/img/compost.png"
              ></div>
            </div>
            <div class="slider-indicators"><span class="dot"></span></div>
          </div>
          <div class="info">
            <h2>Compost</h2>
            <p>
              Ampas kopi yang biasanya terbuang bisa menjadi sumber nutrisi
              berharga bagi tanah.
            </p>

            <div class="product-action" data-price="25000">
              <div class="price-tag">Rp 25.000</div>
              <div class="action-controls">
                <div class="qty-selector">
                  <button class="qty-btn minus">
                    <i class="fas fa-minus"></i>
                  </button>
                  <input
                    type="number"
                    class="qty-input"
                    value="1"
                    min="1"
                    readonly
                  />
                  <button class="qty-btn plus">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <button class="btn-buy">
                  <i class="fas fa-shopping-cart"></i>
                  <span class="total-display">Rp 25.000</span>
                </button>
              </div>
            </div>

            <div class="product-details">
              <div class="accordion-item">
                <button class="accordion-header">
                  Berat Bersih <i class="fas fa-chevron-down"></i>
                </button>
                <div class="accordion-content">
                  <p>100 gram (per batang)</p>
                </div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header">
                  Spesifikasi & Bahan <i class="fas fa-chevron-down"></i>
                </button>
                <div class="accordion-content">
                  <ul>
                    <li>
                      <strong>Bahan Utama:</strong> Limbah Hijau Terfermentasi,
                      Ampas Kopi (Upcycled, 20%), Dekomposer Mikrobia Pilihan.
                    </li>
                    <li>
                      <strong>Fitur:</strong> Kaya Nitrogen Alami, Memperbaiki
                      Struktur Tanah, Mengurangi Pupuk Kimia.
                    </li>
                  </ul>
                </div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header">
                  Dampak Lingkungan <i class="fas fa-chevron-down"></i>
                </button>
                <div class="accordion-content">
                  <div class="impact-highlight">
                    <strong
                      ><i class="fas fa-leaf"></i> 100g Ampas Kopi
                      Diselamatkan</strong
                    >
                    Setara dengan mencegah pelepasan
                    <strong>170g CO2e</strong> ke atmosfer.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </article>

        <!-- BRIQUETTE -->
        <article class="product-card">
          <div class="product-frame-wrapper">
            <div class="slider-track">
              <div
                class="slide-item"
                data-type="2d"
                data-src="assets/img/briquette1.png"
              ></div>
              <div
                class="slide-item"
                data-type="2d"
                data-src="assets/img/briquette2.png"
              ></div>
            </div>
            <div class="slider-indicators"><span class="dot"></span></div>
            <div class="slider-indicators"><span class="dot"></span></div>
          </div>
          <div class="info">
            <h2>Briquette</h2>
            <p>
              Rebru menghadirkan briket ramah lingkungan sebagai alternatif
              energi terbarukan.
            </p>

            <div class="product-action" data-price="20000">
              <div class="price-tag">Rp 20.000</div>
              <div class="action-controls">
                <div class="qty-selector">
                  <button class="qty-btn minus">
                    <i class="fas fa-minus"></i>
                  </button>
                  <input
                    type="number"
                    class="qty-input"
                    value="1"
                    min="1"
                    readonly
                  />
                  <button class="qty-btn plus">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <button class="btn-buy">
                  <i class="fas fa-shopping-cart"></i>
                  <span class="total-display">Rp 20.000</span>
                </button>
              </div>
            </div>

            <div class="product-details">
              <div class="accordion-item">
                <button class="accordion-header">
                  Berat Bersih <i class="fas fa-chevron-down"></i>
                </button>
                <div class="accordion-content">
                  <p>100 gram (per batang)</p>
                </div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header">
                  Spesifikasi & Bahan <i class="fas fa-chevron-down"></i>
                </button>
                <div class="accordion-content">
                  <ul>
                    <li>
                      <strong>Bahan Utama:</strong> Ampas Kopi Pilihan (50%),
                      Serbuk Biomassa (50%), Pati Tapioka.
                    </li>
                    <li>
                      <strong>Fitur:</strong> Alternatif Batu Bara, Pembakaran
                      Lama, Asap Minimal.
                    </li>
                  </ul>
                </div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header">
                  Dampak Lingkungan <i class="fas fa-chevron-down"></i>
                </button>
                <div class="accordion-content">
                  <div class="impact-highlight">
                    <strong
                      ><i class="fas fa-leaf"></i> 500g Ampas Kopi
                      Diselamatkan</strong
                    >
                    Setara dengan mencegah pelepasan
                    <strong>850g CO2e</strong> ke atmosfer.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </article>

        <!-- SOAP -->
        <article class="product-card out-of-stock">
          <div class="product-frame-wrapper">
            <div class="slider-track">
              <div
                class="slide-item"
                data-type="2d"
                data-src="assets/img/soap1.png"
              ></div>
              <div
                class="slide-item"
                data-type="2d"
                data-src="assets/img/soap2.jpg"
              ></div>
            </div>
            <div class="slider-indicators">
              <span class="dot"></span>
              <span class="dot"></span>
            </div>
          </div>
          <div class="info">
            <h2>Soap</h2>
            <p>
              Setiap batang sabun Rebru lahir dari ampas kopi yang sudah selesai
              menyeduh cerita di cangkirmu. Membantu eksfoliasi secara alami.
            </p>

            <div class="product-action" data-price="35000">
              <div class="price-tag">Rp 35.000</div>
              <div class="action-controls">
                <div class="qty-selector">
                  <button class="qty-btn minus">
                    <i class="fas fa-minus"></i>
                  </button>
                  <input
                    type="number"
                    class="qty-input"
                    value="1"
                    min="1"
                    readonly
                  />
                  <button class="qty-btn plus">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <button class="btn-buy">
                  <i class="fas fa-shopping-cart"></i>
                  <span class="total-display">Rp 35.000</span>
                </button>
              </div>
            </div>

            <div class="product-details">
              <div class="accordion-item">
                <button class="accordion-header">
                  Spesifikasi & Bahan <i class="fas fa-chevron-down"></i>
                </button>
                <div class="accordion-content">
                  <ul>
                    <li>
                      <strong>Bahan:</strong> VCO, Minyak Zaitun, Ampas Kopi
                      Robusta, Lye, Aquades.
                    </li>
                    <li><strong>Aroma:</strong> Kopi & Vanilla.</li>
                    <li>
                      <strong>Fitur:</strong> Bebas SLS/Paraben, Vegan Friendly.
                    </li>
                  </ul>
                </div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header">
                  Dampak Lingkungan <i class="fas fa-chevron-down"></i>
                </button>
                <div class="accordion-content">
                  <div class="impact-highlight">
                    <strong
                      ><i class="fas fa-leaf"></i> 45g Ampas Kopi
                      Diselamatkan</strong
                    >
                    Setara dengan mencegah <strong>85g CO2e</strong>.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </article>

        <!-- SCENTED CANDLE -->
        <article class="product-card out-of-stock">
          <div class="product-frame-wrapper">
            <div class="slider-track">
              <div
                class="slide-item"
                data-type="2d"
                data-src="assets/img/candle1.png"
              ></div>
            </div>
            <div class="slider-indicators"><span class="dot"></span></div>
          </div>
          <div class="info">
            <h2>Scented Candle</h2>
            <p>
              Lilin dengan aroma hangat kopi yang berpadu dengan desain estetik.
            </p>

            <div class="product-action" data-price="50000">
              <div class="price-tag">Rp 50.000</div>
              <div class="action-controls">
                <div class="qty-selector">
                  <button class="qty-btn minus">
                    <i class="fas fa-minus"></i>
                  </button>
                  <input
                    type="number"
                    class="qty-input"
                    value="1"
                    min="1"
                    readonly
                  />
                  <button class="qty-btn plus">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <button class="btn-buy">
                  <i class="fas fa-shopping-cart"></i>
                  <span class="total-display">Rp 50.000</span>
                </button>
              </div>
            </div>

            <div class="product-details">
              <div class="accordion-item">
                <button class="accordion-header">
                  Spesifikasi & Bahan <i class="fas fa-chevron-down"></i>
                </button>
                <div class="accordion-content">
                  <ul>
                    <li>
                      <strong>Bahan:</strong> Soy Wax Alami, Ampas Kopi (20%),
                      Sumbu Katun.
                    </li>
                    <li>
                      <strong>Varian:</strong> Warm Vanilla Coffee, Spicy
                      Citrus, Forest Wood.
                    </li>
                  </ul>
                </div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header">
                  Dampak Lingkungan <i class="fas fa-chevron-down"></i>
                </button>
                <div class="accordion-content">
                  <div class="impact-highlight">
                    <strong
                      ><i class="fas fa-leaf"></i> 50g Ampas Kopi
                      Diselamatkan</strong
                    >
                    Setara dengan mencegah <strong>85g CO2e</strong>.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </article>

        <!-- FRAGRANCE -->
        <article class="product-card out-of-stock">
          <div class="product-frame-wrapper">
            <div class="slider-track">
              <div
                class="slide-item"
                data-type="2d"
                data-src="assets/img/fragrance1.png"
              ></div>
            </div>
            <div class="slider-indicators"><span class="dot"></span></div>
          </div>
          <div class="info">
            <h2>Car Fragrance</h2>
            <p>
              Setiap perjalanan bisa menjadi lebih segar dan bermakna bersama
              Rebru Car Fragrance.
            </p>

            <div class="product-action" data-price="50000">
              <div class="price-tag">Rp 50.000</div>
              <div class="action-controls">
                <div class="qty-selector">
                  <button class="qty-btn minus">
                    <i class="fas fa-minus"></i>
                  </button>
                  <input
                    type="number"
                    class="qty-input"
                    value="1"
                    min="1"
                    readonly
                  />
                  <button class="qty-btn plus">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <button class="btn-buy">
                  <i class="fas fa-shopping-cart"></i>
                  <span class="total-display">Rp 50.000</span>
                </button>
              </div>
            </div>

            <div class="product-details">
              <div class="accordion-item">
                <button class="accordion-header">
                  Spesifikasi & Bahan <i class="fas fa-chevron-down"></i>
                </button>
                <div class="accordion-content">
                  <ul>
                    <li>
                      <strong>Bahan:</strong> Ampas Kopi Murni (75%), Pengikat
                      Organik, Minyak Esensial.
                    </li>
                    <li>
                      <strong>Varian:</strong> Espresso Black, Ocean Breeze,
                      Tropical Fresh.
                    </li>
                  </ul>
                </div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header">
                  Dampak Lingkungan <i class="fas fa-chevron-down"></i>
                </button>
                <div class="accordion-content">
                  <div class="impact-highlight">
                    <strong
                      ><i class="fas fa-leaf"></i> 75g Ampas Kopi
                      Diselamatkan</strong
                    >
                    Setara dengan mencegah <strong>128g CO2e</strong>.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </article>

        <!-- ECO-GOODS -->
        <article class="product-card out-of-stock">
          <div class="product-frame-wrapper">
            <div class="slider-track">
              <div
                class="slide-item"
                data-type="3d"
                data-src="assets/models/merch.glb"
              ></div>
            </div>
            <div class="slider-indicators"><span class="dot"></span></div>
          </div>
          <div class="info">
            <h2>Eco-Goods</h2>
            <p>
              Lebih dari sekadar produk, Rebru juga menghadirkan berbagai
              eco-goods hasil upcycle dari limbah kopi.
            </p>

            <div class="product-action" data-price="120000">
              <div class="price-tag">Rp 120.000</div>
              <div class="action-controls">
                <div class="qty-selector">
                  <button class="qty-btn minus">
                    <i class="fas fa-minus"></i>
                  </button>
                  <input
                    type="number"
                    class="qty-input"
                    value="1"
                    min="1"
                    readonly
                  />
                  <button class="qty-btn plus">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <button class="btn-buy">
                  <i class="fas fa-shopping-cart"></i>
                  <span class="total-display">Rp 120.000</span>
                </button>
              </div>
            </div>
          </div>
        </article>
      </section>
    </main>

    <footer>
      <p>&copy;2025 rebru. All Rights Reserved.</p>
      Follow us on |
      <a
        href="https://www.instagram.com/rebru.id"
        class="social-icon"
        target="_blank"
      >
        <i class="fab fa-instagram"></i>
        <span><strong>Instagram</strong></span>
      </a>
    </footer>

    <div id="cart-float-btn">
      <i class="fas fa-shopping-cart"></i>
      <span id="cart-count">0</span>
    </div>

    <div id="cart-modal" class="modal">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2>Keranjang Belanja</h2>
        <div id="cart-items">
          <p class="empty-msg">Keranjang Anda masih kosong.</p>
        </div>
        <div class="cart-summary">
          <div class="total-row">
            <span>Total Estimasi:</span>
            <span id="cart-grand-total">Rp 0</span>
          </div>
          <button
            id="checkout-wa-btn"
            class="btn-buy"
            style="width: 100%; justify-content: center; margin-top: 15px"
          >
            <i class="fab fa-whatsapp"></i> Checkout via WhatsApp
          </button>
        </div>
      </div>
    </div>

    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
      }
    </script>

    <script type="module">
      import * as THREE from "three";
      import { GLTFLoader } from "three/addons/loaders/GLTFLoader.js";

      // ===============================================
      // KONFIGURASI UMUM (SILAKAN UBAH DI SINI)
      // ===============================================
      const CONFIG = {
        adminPhone: "6285237390994", // Ganti nomor WA Admin di sini (format internasional tanpa +)
        currency: "IDR",
        locale: "id-ID",
      };

      let shoppingCart = [];

      // ===============================================
      // 1. SISTEM KERANJANG BELANJA (CART SYSTEM)
      // ===============================================
      function initCartSystem() {
        const productActions = document.querySelectorAll(".product-action");

        productActions.forEach((action) => {
          const basePrice = parseInt(action.getAttribute("data-price"));
          const qtyInput = action.querySelector(".qty-input");
          const minusBtn = action.querySelector(".minus");
          const plusBtn = action.querySelector(".plus");
          const totalDisplay = action.querySelector(".total-display");
          const buyBtn = action.querySelector(".btn-buy");

          if (!qtyInput || !buyBtn) return;

          // Helper: Update tampilan harga per card
          function updateCardPrice() {
            const qty = parseInt(qtyInput.value);
            const total = basePrice * qty;
            totalDisplay.textContent =
              "Rp " + total.toLocaleString(CONFIG.locale);
          }

          // Event Listeners: Minus / Plus
          minusBtn.addEventListener("click", () => {
            let val = parseInt(qtyInput.value);
            if (val > 1) {
              qtyInput.value = val - 1;
              updateCardPrice();
            }
          });

          plusBtn.addEventListener("click", () => {
            let val = parseInt(qtyInput.value);
            qtyInput.value = val + 1;
            updateCardPrice();
          });

          // Event Listener: Add to Cart
          buyBtn.addEventListener("click", () => {
            const card = action.closest(".product-card");
            const name = card.querySelector(".info h2").innerText;
            const qty = parseInt(qtyInput.value);
            const subtotal = basePrice * qty;

            addToCart(name, qty, basePrice, subtotal);

            // Visual feedback
            const originalText = buyBtn.innerHTML;
            buyBtn.innerHTML = '<i class="fas fa-check"></i> Masuk Keranjang';
            buyBtn.style.background = "#2e8b4e";
            setTimeout(() => {
              buyBtn.innerHTML = originalText;
              buyBtn.style.background = "";
            }, 1500);
          });
        });
      }

      function addToCart(name, qty, price, subtotal) {
        const existingItem = shoppingCart.find((item) => item.name === name);
        if (existingItem) {
          existingItem.qty += qty;
          existingItem.subtotal += subtotal;
        } else {
          shoppingCart.push({ name, qty, price, subtotal });
        }
        updateCartUI();
      }

      // Expose function ke window agar bisa diakses dari HTML string (tombol trash)
      window.removeItem = function (index) {
        shoppingCart.splice(index, 1);
        updateCartUI();
        renderCartItems();
      };

      function updateCartUI() {
        const badge = document.getElementById("cart-count");
        const totalItems = shoppingCart.reduce(
          (sum, item) => sum + item.qty,
          0
        );
        badge.textContent = totalItems;
        badge.style.transform = "scale(1.2)";
        setTimeout(() => (badge.style.transform = "scale(1)"), 200);
      }

      function renderCartItems() {
        const container = document.getElementById("cart-items");
        const grandTotalEl = document.getElementById("cart-grand-total");
        container.innerHTML = "";

        if (shoppingCart.length === 0) {
          container.innerHTML =
            '<p class="empty-msg" style="text-align:center; color:#888; margin-top:20px;">Keranjang kosong.</p>';
          grandTotalEl.textContent = "Rp 0";
          return;
        }

        let totalAll = 0;
        shoppingCart.forEach((item, index) => {
          totalAll += item.subtotal;
          const row = document.createElement("div");
          row.className = "cart-item-row";
          row.innerHTML = `
            <div class="cart-item-info">
              <h4>${item.name}</h4>
              <p>${item.qty} x Rp ${item.price.toLocaleString(
            CONFIG.locale
          )}</p>
            </div>
            <div class="cart-item-right">
              <span style="font-weight:bold; margin-right:10px;">Rp ${item.subtotal.toLocaleString(
                CONFIG.locale
              )}</span>
              <button class="btn-remove-item" onclick="removeItem(${index})"><i class="fas fa-trash"></i></button>
            </div>
          `;
          container.appendChild(row);
        });
        grandTotalEl.textContent =
          "Rp " + totalAll.toLocaleString(CONFIG.locale);
      }

      function initModalLogic() {
        const modal = document.getElementById("cart-modal");
        const floatBtn = document.getElementById("cart-float-btn");
        const closeBtn = document.querySelector(".close-modal");
        const checkoutBtn = document.getElementById("checkout-wa-btn");

        floatBtn.addEventListener("click", () => {
          modal.style.display = "block";
          renderCartItems();
        });

        closeBtn.addEventListener(
          "click",
          () => (modal.style.display = "none")
        );
        window.addEventListener("click", (e) => {
          if (e.target == modal) modal.style.display = "none";
        });

        checkoutBtn.addEventListener("click", () => {
          if (shoppingCart.length === 0) {
            alert("Keranjang Anda kosong!");
            return;
          }
          let message = `Halo Admin Rebru, saya mau pesan list produk ini:\n\n`;
          let grandTotal = 0;
          shoppingCart.forEach((item, index) => {
            message += `${index + 1}. *${item.name}* \n    ${
              item.qty
            } pcs x Rp ${item.price.toLocaleString(
              CONFIG.locale
            )} = Rp ${item.subtotal.toLocaleString(CONFIG.locale)}\n`;
            grandTotal += item.subtotal;
          });
          message += `\nüí∞ *TOTAL BELANJA: Rp ${grandTotal.toLocaleString(
            CONFIG.locale
          )}*`;
          message += `\n\nMohon info ongkir ke alamat saya. Terima kasih!`;

          window.open(
            `https://wa.me/${CONFIG.adminPhone}?text=${encodeURIComponent(
              message
            )}`,
            "_blank"
          );
        });
      }

      // ===============================================
      // 2. NAVIGASI SLIDER & 3D VIEWER
      // ===============================================
      function initSliderNavigation() {
        const wrappers = document.querySelectorAll(".product-frame-wrapper");
        wrappers.forEach((wrapper) => {
          const slider = wrapper.querySelector(".slider-track");
          if (!slider) return;

          // Buat tombol navigasi jika slide lebih dari 1
          if (slider.children.length > 1) {
            const prevBtn = document.createElement("button");
            prevBtn.className = "slide-nav-btn prev";
            prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i>';
            const nextBtn = document.createElement("button");
            nextBtn.className = "slide-nav-btn next";
            nextBtn.innerHTML = '<i class="fas fa-chevron-right"></i>';

            wrapper.appendChild(prevBtn);
            wrapper.appendChild(nextBtn);

            const cardWidth = wrapper.clientWidth;
            prevBtn.addEventListener("click", (e) => {
              e.stopPropagation();
              slider.scrollBy({ left: -cardWidth, behavior: "smooth" });
            });
            nextBtn.addEventListener("click", (e) => {
              e.stopPropagation();
              slider.scrollBy({ left: cardWidth, behavior: "smooth" });
            });
          }

          // Fitur Drag Mouse
          let isDown = false,
            startX,
            scrollLeft;
          slider.addEventListener("mousedown", (e) => {
            isDown = true;
            slider.classList.add("active");
            startX = e.pageX - slider.offsetLeft;
            scrollLeft = slider.scrollLeft;
          });
          slider.addEventListener("mouseleave", () => {
            isDown = false;
            slider.classList.remove("active");
          });
          slider.addEventListener("mouseup", () => {
            isDown = false;
            slider.classList.remove("active");
          });
          slider.addEventListener("mousemove", (e) => {
            if (!isDown) return;
            e.preventDefault();
            const x = e.pageX - slider.offsetLeft;
            const walk = (x - startX) * 2;
            slider.scrollLeft = scrollLeft - walk;
          });
        });
      }

      // Logic Rendering 3D (Three.js) & 2D Image
      function initSlide(container) {
        const type = container.getAttribute("data-type");
        const src = container.getAttribute("data-src");
        if (!src) return;

        if (type === "3d") init3D(container, src);
        else if (type === "2d") init2D(container, src);
      }

      function init2D(container, imgSrc) {
        const img = document.createElement("img");
        img.src = imgSrc;
        img.className = "img-2d";
        img.alt = "Product Image";
        container.appendChild(img);
      }

      function init3D(container, modelPath) {
        const width = container.clientWidth || 350;
        const height = container.clientHeight || 350;
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0xf4f4f4);

        const camera = new THREE.PerspectiveCamera(
          45,
          width / height,
          0.1,
          100
        );
        camera.position.z = 4;

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(width, height);
        container.appendChild(renderer.domElement);

        scene.add(new THREE.AmbientLight(0xffffff, 1.2));
        const dirLight = new THREE.DirectionalLight(0xffffff, 2.5);
        dirLight.position.set(2, 2, 5);
        scene.add(dirLight);

        const loader = new GLTFLoader();
        let productMesh;

        loader.load(
          modelPath,
          (gltf) => {
            productMesh = gltf.scene;
            // Auto-centering & Scaling
            const box = new THREE.Box3().setFromObject(productMesh);
            const size = new THREE.Vector3();
            box.getSize(size);
            const maxDim = Math.max(size.x, size.y, size.z);
            const scale = 2.5 / maxDim;
            productMesh.scale.set(scale, scale, scale);

            const newBox = new THREE.Box3().setFromObject(productMesh);
            const center = new THREE.Vector3();
            newBox.getCenter(center);
            productMesh.position.sub(center);

            scene.add(productMesh);
          },
          undefined,
          (err) => console.warn("Error loading GLB:", modelPath)
        );

        // Interaksi Mouse (Rotasi)
        let targetRotationX = 0,
          targetRotationY = 0;
        container.addEventListener("mousemove", (e) => {
          if (e.buttons === 1) return;
          const rect = container.getBoundingClientRect();
          targetRotationY = (((e.clientX - rect.left) / width) * 2 - 1) * 1.5;
          targetRotationX = -(((e.clientY - rect.top) / height) * 2 + 1) * 0.5;
        });
        container.addEventListener("mouseleave", () => {
          targetRotationX = 0;
          targetRotationY = 0;
        });

        function animate() {
          requestAnimationFrame(animate);
          if (productMesh) {
            productMesh.rotation.y +=
              (targetRotationY - productMesh.rotation.y) * 0.05;
            productMesh.rotation.x +=
              (targetRotationX - productMesh.rotation.x) * 0.05;
          }
          renderer.render(scene, camera);
        }
        animate();
      }

      // ===============================================
      // 3. UTILITIES (ACCORDION & MENU)
      // ===============================================
      function initAccordion() {
        document.querySelectorAll(".accordion-header").forEach((header) => {
          header.addEventListener("click", () => {
            header.classList.toggle("active");
            const content = header.nextElementSibling;
            content.style.maxHeight = header.classList.contains("active")
              ? content.scrollHeight + "px"
              : 0;
          });
        });
      }

      // Jalankan semua fungsi saat load
      document.addEventListener("DOMContentLoaded", () => {
        initCartSystem();
        initModalLogic();
        initSliderNavigation();
        initAccordion();

        // Init 3D/2D Slides
        document
          .querySelectorAll(".slide-item")
          .forEach((slide) => initSlide(slide));

        // Hamburger Menu
        const menuToggle = document.querySelector(".menu-toggle");
        const nav = document.querySelector("nav");
        if (menuToggle && nav)
          menuToggle.addEventListener("click", () =>
            nav.classList.toggle("active")
          );
      });
    </script>
  </body>
</html>


